<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GCHS Countdowns</title>
  <link rel="icon" href="favicon.ico?v=12" sizes="any">
  <link rel="shortcut icon" href="favicon.ico?v=12" type="image/x-icon">

  <style>
    :root {
      --grant-red:#C8102E;
      --grant-red-dark:#A50E24;
      --page:#f3f4f7;
      --text:#1b1d21;
      --muted:#6b7280;
      --card:#ffffff;
      --shadow:0 14px 30px rgba(0,0,0,.14);
      --border:#e6e8ef;
      --track:#e5e7eb;
      --track-on-red:rgba(255,255,255,.35);
      --bar-on-red:#fff;
    }
    *{box-sizing:border-box}
    body {
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--page);
      color:var(--text);
      display:grid;
      grid-template-rows:auto 1fr auto;
      min-height:100vh;
      overflow-x:hidden;
    }

    /* Bounce in animation */
    @keyframes bounceIn {
      0%   { transform: scale(0.9); opacity: 0; }
      60%  { transform: scale(1.05); opacity: 1; }
      80%  { transform: scale(0.95); }
      100% { transform: scale(1); opacity: 1; }
    }
    body.loaded header,
    body.loaded main,
    body.loaded footer,
    body.loaded .disclaimer {
      animation: bounceIn 0.8s ease forwards;
    }
    body.loaded main { animation-delay: 0.15s; }
    body.loaded footer { animation-delay: 0.3s; }
    body.loaded .disclaimer { animation-delay: 0.45s; }

    /* Smooth content swap (when changing countdowns) */
    .swap-out {
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .18s ease, transform .18s ease;
    }
    .swap-in {
      opacity: 1;
      transform: translateY(0);
      transition: opacity .24s ease, transform .24s ease;
    }

    /* Header */
    header {
      background:var(--grant-red);
      color:#fff;
      display:flex;
      flex-direction:column;
      gap:8px;
      padding:8px 16px 12px;
      box-shadow:0 2px 6px rgba(0,0,0,.18);
      position:sticky;
      top:0;
      z-index:2000;
    }
    .headrow {
      display:flex;
      align-items:center;
      justify-content:space-between;
    }
    .brand { font-weight:800; text-shadow:0 1px 0 rgba(0,0,0,.25); }
    .actions { display:flex; gap:10px; align-items:center; }
    .btn {
      appearance:none;
      border:0;
      border-radius:10px;
      cursor:pointer;
      padding:8px 12px;
      font-weight:700;
    }
    .btn-ghost{ background:transparent; color:#fff; }
    .btn-ghost:hover{ background:rgba(255,255,255,.12); }
    .btn-outline{ background:#fff; color:#000; }
    .btn-outline:hover{ background:#f2f2f2; }
    .btn-red{ background:var(--grant-red); color:#fff; border-radius:999px; }
    .btn-red:hover{ background:var(--grant-red-dark); }

    /* Sem 1 Progress */
    .sem1{ display:flex; flex-direction:column; gap:6px; }
    .sem1-header{ display:flex; justify-content:space-between; font-size:.95rem; }
    .sem1-title{ font-weight:800; }
    .sem1-percent{ font-weight:800; }
    .sem1-track{ height:8px; background:var(--track-on-red); border-radius:999px; }
    .sem1-track .bar{ height:100%; width:0%; background:var(--bar-on-red); }

    /* Main */
    .wrap{ display:flex; justify-content:center; padding:36px 16px; }
    .card{
      width:min(900px, 92vw);
      background:var(--card);
      border-radius:14px;
      box-shadow:var(--shadow);
      border:1px solid var(--border);
      text-align:center;
      padding:24px 28px;
    }
    .section-title{ color:var(--grant-red); font-weight:800; }
    #daysRow{ display:flex; justify-content:center; gap:12px; }
    #daysRemaining{ color:var(--grant-red); font-size:clamp(72px, 10vw, 160px); font-weight:900; }
    #daysUnit{ font-size:clamp(22px, 3vw, 36px); font-weight:700; }

    /* Footer */
    footer.sem2-footer{ display:flex; justify-content:center; padding:0 16px 16px; }
    .sem2-container{ width:min(900px,92vw); }
    .progress{ height:10px; background:var(--track); border-radius:999px; overflow:hidden; }
    .progress .bar{ height:100%; width:0%; background:var(--grant-red); transition:width .4s ease; }
    .lock-pill{ position:absolute; left:50%; transform:translateX(-50%); top:-18px;
      background:rgba(107,114,128,.92); color:#fff; padding:4px 10px; border-radius:999px; font-size:.8rem; }

    /* Dropdown (smooth animation) */
    .more-menu {
      position:fixed; right:12px; top:60px;
      background:#fff; border:1px solid var(--border);
      border-radius:12px; box-shadow:0 16px 36px rgba(0,0,0,.18);
      min-width:320px; z-index:2500;

      /* hidden state */
      max-height:0;
      opacity:0;
      transform: translateY(-8px);
      overflow:hidden;
      pointer-events:none;

      transition: max-height .32s ease, opacity .24s ease, transform .24s ease;
    }
    .more-menu.open{
      max-height:520px;           /* large enough for all items */
      opacity:1;
      transform: translateY(0);
      pointer-events:auto;
    }
    .more-menu .item{ padding:12px 14px; cursor:pointer; border-bottom:1px solid var(--border); }
    .more-menu .item:hover{ background:#f7f7fb; }

    /* Modals */
    .modal{ display:none; position:fixed; inset:0; z-index:3000;
      align-items:center; justify-content:center; background:rgba(0,0,0,.35); }
    .modal.open{ display:flex; }
    .panel{ background:#fff; border-radius:12px; box-shadow:0 24px 48px rgba(0,0,0,.2); padding:20px; width:min(92vw,560px); }

    /* Disclaimer (bottom right, a bit smaller & tighter) */
    .disclaimer {
      position:fixed;
      right:10px;
      bottom:6px;
      z-index:2550;
      color:#4b5563;
      font-size:.7rem;
      max-width:440px;
      text-transform:uppercase;
      letter-spacing:.03em;
      text-align:right;
      line-height:1.3;
    }
  </style>
</head>
<body>
<header id="siteHeader">
  <div class="headrow">
    <div class="brand">Grant Community High School</div>
    <div class="actions">
      <button id="howBtn" class="btn btn-outline">How to use</button>
      <button id="moreBtn" class="btn btn-ghost">More Countdowns ▾</button>
    </div>
  </div>
  <div class="sem1">
    <div class="sem1-header">
      <span class="sem1-title">Semester 1 Progress</span>
      <span id="sem1Percent" class="sem1-percent">0%</span>
    </div>
    <div class="sem1-track"><div id="sem1Bar" class="bar"></div></div>
  </div>
</header>

<main class="wrap">
  <section class="card">
    <div class="section-title">GCHS COUNTDOWN</div>
    <div>Welcome Bulldogs!</div>
    <div id="eventName">Last Day of School</div>
    <div id="daysRow">
      <span id="daysRemaining">Loading...</span>
      <span id="daysUnit">days</span>
    </div>
    <div id="countdown">-- hours -- minutes -- seconds</div>
    <div style="margin-top:14px">
      <button id="moreInfoBtn" class="btn btn-red">More Info</button>
    </div>
  </section>
</main>

<footer class="sem2-footer">
  <div class="sem2-container">
    <div class="sem-header">
      <span class="sem-title">Semester 2 Progress</span>
      <span id="sem2Percent" class="sem-percent">0%</span>
    </div>
    <div class="progress"><div id="sem2Bar" class="bar"></div></div>
    <div id="sem2Lock" class="lock-pill">LOCKED: Semester 2 has not begun yet.</div>
    <div id="sem2Sub" class="sem-sub">Jan 5, 2026 – May 22, 2026</div>
  </div>
</footer>

<!-- Dropdown -->
<div class="more-menu" id="moreMenu">
  <div class="item" data-key="lastDay">Last Day of School</div>
  <div class="item" data-key="winterBreak">Winter Break</div>
  <div class="item" data-key="springBreak">Spring Break</div>
  <div class="item" data-key="thanksgivingBreak">Thanksgiving Break</div>
  <div class="item" data-key="graduation">Graduation</div>
  <div class="item" data-key="homecoming">Homecoming</div>
  <div class="item" data-key="prom">Prom</div>
  <div class="item" data-key="seniorFinals">Senior Finals</div>
  <div class="item" data-key="underclassFinals">Underclass Finals</div>
  <!-- School Time Remaining Calculator -->
<div class="menu-item" style="flex-direction:column;align-items:flex-start;gap:8px">
  <div><strong>School Time Remaining Calculator</strong></div>
  <div style="display:flex;gap:6px;align-items:center;">
    <input id="schoolHour" type="number" min="1" max="12" placeholder="HH" style="width:50px;padding:4px;border:1px solid var(--border);border-radius:6px;">
    <span>:</span>
    <input id="schoolMinute" type="number" min="0" max="59" placeholder="MM" style="width:50px;padding:4px;border:1px solid var(--border);border-radius:6px;">
    <button id="amBtn" class="ampm-btn">AM</button>
    <button id="pmBtn" class="ampm-btn active">PM</button>
  </div>
  <button id="schoolCalcBtn" class="btn btn-red" style="margin-top:6px">Confirm</button>
  <div id="schoolCalcResult" style="margin-top:6px;font-size:0.9rem;font-weight:600;"></div>
</div>

</div>

<!-- Info modal -->
<div class="modal" id="infoModal"><div class="panel">
  <h2>Countdown Info</h2>
  <p><b>Last Day of School:</b> Final day of school.</p>
  <p><b>Winter Break:</b> First day of winter break.</p>
  <p><b>Spring Break:</b> First day of spring break.</p>
  <p><b>Thanksgiving Break:</b> First day of Thanksgiving break.</p>
  <p><b>Graduation:</b> Graduation day.</p>
  <p><b>Homecoming:</b> Homecoming day.</p>
  <p><b>Prom:</b> Prom.</p>
  <p><b>Senior Finals:</b> First day of senior exams.</p>
  <p><b>Underclass Finals:</b> First day of underclass exams.</p>
  <button class="btn btn-outline" id="infoClose">Close</button>
</div></div>

<!-- How modal -->
<div class="modal" id="howModal"><div class="panel">
  <h2>How to use</h2>
  <ul style="margin: 0; padding-left: 20px; list-style-type: disc;">
    <li>Click “More Countdowns” to switch events.</li>
    <li>Use the countdown timer to track important school events.</li>
    <li>Use the calculator at the bottom of the "More Countdowns" section to track how long until school is over.</li>
  </ul>
  <button class="btn btn-outline" id="howClose">Close</button>
</div></div>


<!-- Help modal -->
<div class="modal" id="helpModal"><div class="panel">
  <h2>Help</h2>
  <ul style="margin: 0; padding-left: 20px; list-style-type: disc;">
    <li>If there is any issues please be patient and i will get to them.</li>
    <li>This site was made with the help from ChatGPT but the idea was entirely human.</li>
    <li>I am 1 person, not multiple. Thank you! -MVM</li>
  </ul>
  <button class="btn btn-outline" id="helpClose">Close</button>
</div></div>

<button class="btn btn-outline" id="helpBtn" style="position:fixed;left:10px;bottom:10px;z-index:2600">Help</button>

<div class="disclaimer">
  THIS IS NOT AN OFFICIAL GRANT COMMUNITY HIGH SCHOOL WEBSITE.<br>
  FOR THE OFFICIAL SITE VISIT GRANTBULLDOGS.ORG
</div>

<script>
  const $ = (s,r=document)=>r.querySelector(s);
  const $$=(s,r=document)=>[...r.querySelectorAll(s)];

  const events = {
    lastDay:{name:"Last Day of School",date:"2026-05-22T00:00:00"},
    winterBreak:{name:"Winter Break",date:"2025-12-22T00:00:00"},
    springBreak:{name:"Spring Break",date:"2026-03-23T00:00:00"},
    thanksgivingBreak:{name:"Thanksgiving Break",date:"2025-11-26T00:00:00"},
    graduation:{name:"Graduation",date:"2026-05-17T00:00:00"},
    homecoming:{name:"Homecoming",date:"2025-09-19T00:00:00"},
    prom:{name:"Prom",date:"2026-05-01T00:00:00"},
    seniorFinals:{name:"Senior Finals",date:"2026-05-12T00:00:00"},
    underclassFinals:{name:"Underclass Finals",date:"2026-05-20T00:00:00"}
  };
  let selectedEvent="lastDay";

  const SEM1_START=new Date("2025-08-13T00:00:00");
  const SEM1_END=new Date("2025-12-19T23:59:59");
  const SEM2_START=new Date("2026-01-05T00:00:00");
  const SEM2_END=new Date("2026-05-22T23:59:59");

  function daysUntilExclusive(today, finalDay){
    const start=new Date(today); start.setHours(0,0,0,0);
    const end=new Date(finalDay); end.setHours(0,0,0,0);
    return Math.max(0,Math.floor((end-start)/86400000));
  }
  function formatTime(sec){
    const h=Math.floor(sec/3600), m=Math.floor((sec%3600)/60), s=sec%60;
    return `${h} hour${h!==1?"s":""} ${m} minute${m!==1?"s":""} ${s} second${s!==1?"s":""}`;
  }
  function boundedPercent(now,start,end){
    if(now<=start)return 0;
    if(now>=end)return 100;
    return ((now-start)/(end-start))*100;
  }

  function update(){
    const now=new Date();
    const ev=events[selectedEvent];
    const finalDay=new Date(ev.date);
    const days=daysUntilExclusive(now,finalDay);
    const nextMidnight=new Date(now); nextMidnight.setHours(24,0,0,0);
    let secLeft=Math.floor((nextMidnight-now)/1000);
    if(secLeft<=0)secLeft=86400;

    $("#eventName").textContent=ev.name;
    $("#daysRemaining").textContent=days;
    $("#daysUnit").textContent=days===1?"day":"days";
    $("#countdown").textContent=formatTime(secLeft);

    const sem1Pct=boundedPercent(now,SEM1_START,SEM1_END);
    $("#sem1Bar").style.width=sem1Pct.toFixed(2)+"%";
    $("#sem1Percent").textContent=Math.floor(sem1Pct)+"%";

    const sem2Pct=boundedPercent(now,SEM2_START,SEM2_END);
    $("#sem2Bar").style.width=sem2Pct.toFixed(2)+"%";
    $("#sem2Percent").textContent=Math.floor(sem2Pct)+"%";
    $("#sem2Lock").style.display=(now<SEM2_START)?"block":"none";
  }

  // Smoothly switch events (fade/slide old out, then new in)
  function animateEventChange(nextKey){
    const els = [$("#eventName"), $("#daysRow"), $("#countdown")];

    // Start fade out
    els.forEach(el => {
      el.classList.remove('swap-in');
      void el.offsetWidth; // reflow to ensure transition
      el.classList.add('swap-out');
    });

    const doSwap = () => {
      selectedEvent = nextKey;
      update();

      // Fade back in
      requestAnimationFrame(()=>{
        els.forEach(el => {
          el.classList.remove('swap-out');
          void el.offsetWidth;
          el.classList.add('swap-in');
          // optional cleanup after animation
          setTimeout(()=>el.classList.remove('swap-in'), 260);
        });
      });
    };

    // Once the first element finishes its fade out, swap content
    els[0].addEventListener('transitionend', doSwap, { once:true });

    // Fallback in case transitionend doesn't fire
    setTimeout(doSwap, 220);
  }

  // UI Logic
  $("#moreBtn").addEventListener("click",(e)=>{
    e.stopPropagation();
    $("#moreMenu").classList.toggle("open");
  });
  document.addEventListener("click",e=>{
    if(!$("#moreMenu").contains(e.target) && !$("#moreBtn").contains(e.target)){
      $("#moreMenu").classList.remove("open");
    }
  });
  $$("#moreMenu .item").forEach(i=>i.addEventListener("click",()=>{
    animateEventChange(i.dataset.key);
    $("#moreMenu").classList.remove("open");
  }));

  function bindModal(openBtn,modal,closeBtn){
    $(openBtn).addEventListener("click",()=>$(modal).classList.add("open"));
    $(closeBtn).addEventListener("click",()=>$(modal).classList.remove("open"));
  }
  bindModal("#moreInfoBtn","#infoModal","#infoClose");
  bindModal("#howBtn","#howModal","#howClose");
  bindModal("#helpBtn","#helpModal","#helpClose");

  // trigger bounce-in animations once page loads
  window.addEventListener("load",()=>document.body.classList.add("loaded"));

  update();
  setInterval(update,1000);
</script>

<style>
.ampm-btn {
  padding:4px 8px;
  border:1px solid var(--border);
  border-radius:6px;
  background:#f8f9fa;
  cursor:pointer;
  font-size:0.8rem;
}
.ampm-btn.active {
  background:#007bff;
  color:white;
  border-color:#007bff;
}

</style>

<script>
// School calculator logic
let ampm = "PM"; // default

document.getElementById("amBtn").addEventListener("click", () => {
  ampm = "AM";
  document.getElementById("amBtn").classList.add("active");
  document.getElementById("pmBtn").classList.remove("active");
});

document.getElementById("pmBtn").addEventListener("click", () => {
  ampm = "PM";
  document.getElementById("pmBtn").classList.add("active");
  document.getElementById("amBtn").classList.remove("active");
});

document.getElementById("schoolCalcBtn").addEventListener("click", () => {
  const h = parseInt(document.getElementById("schoolHour").value);
  const m = parseInt(document.getElementById("schoolMinute").value) || 0;
  const resultEl = document.getElementById("schoolCalcResult");

  if(isNaN(h) || h < 1 || h > 12){
    resultEl.textContent = "Please enter a valid hour (1–12).";
    return;
  }
  if(m < 0 || m > 59){
    resultEl.textContent = "Please enter valid minutes (0–59).";
    return;
  }

  let hour24 = h % 12;
  if(ampm === "PM") hour24 += 12;

  const inputDate = new Date();
  inputDate.setHours(hour24, m, 0, 0);

  const endDate = new Date();
  endDate.setHours(15, 10, 0, 0); // 3:10 PM

  if(inputDate >= endDate){
    resultEl.textContent = "School has ended.";
  } else {
    let diff = (endDate - inputDate) / 60000; // minutes
    const hrs = Math.floor(diff / 60);
    const mins = Math.floor(diff % 60);

    let result = "";
    if(hrs > 0) result += `${hrs} hour${hrs>1?"s":""} `;
    if(mins > 0) result += `${mins} minute${mins>1?"s":""}`;
    if(result === "") result = "Less than a minute";

    resultEl.textContent = `${result} remaining until school is over.`;
  }
});

</script>
</body>
</html>
